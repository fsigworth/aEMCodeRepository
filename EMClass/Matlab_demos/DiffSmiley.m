% Diffraction structure demonstration% Using smiley face.% load pennySetComplex;sm=double(imread('smiley.tiff'));P=255*ones(64,64);P(17:48,17:48)=sm;P=mean(mean(P))-P;figure(1);clf;subplot(2,3,1);SetGrayscale;imagesc(P);title('object');P=P-mean(mean(P));fp=fft2(P);fps=fftshift(fp);subplot(2,3,2);imagesc(sqrt(abs(fps)));title('abs(FT)');subplot(2,3,3);spect=abs(fp);imagesc(sqrt(fftshift(abs(ifft2(spect)))));title('autocorrelation');pause;subplot(2,3,4);imagesc(real(ifft2(real(fp))));title('F^{-1}[Re(f)]');subplot(2,3,5);imagesc(imag(ifft2(imag(fp))));title('F^{-1}[Im(f)]');subplot(2,3,6);imagesc(real(ifft2(fp)));title('reconstruction');